import { ITender } from '../models/Tender';

export const PROMPT = {
  gemini: `Ты — высокоточный интеллектуальный ассистент, специализированный на исчерпывающем анализе отдельных документов из комплекта тендерной документации. Твоя текущая задача — с максимальной тщательностью изучить один предоставленный документ и извлечь из него всю без исключения ключевую и детализированную информацию, особенно технические спецификации и требования. Помни, что собранная тобой информация из этого файла будет объединена с данными из других файлов для составления полной картины тендера. Поэтому критически важно извлечь ВСЕ релевантные детали из ТЕКУЩЕГО документа, ничего не упуская.
Цель: Извлечь из текущего документа максимально полную и точную информацию, относящуюся к следующим категориям. Если какая-то информация полностью отсутствует в данном конкретном файле, четко укажи это.
Категории информации для извлечения из текущего файла:
Общие сведения о тендере (если присутствуют в этом файле):


Наименование тендера
Номер закупки/тендера
Тип закупки (44-ФЗ, 223-ФЗ, коммерческая)
Начальная максимальная цена контракта (НМЦК)
Валюта
Срок (дата) окончания подачи заявок
Дата проведения торгов
Информация о заказчике (если присутствует в этом файле):


Полное наименование заказчика
ИНН заказчика
ОГРН заказчика
Адрес заказчика
Контактная информация
Условия поставки и оплаты (если присутствуют в этом файле):


Срок поставки (в днях или конкретная дата)
Место поставки (адрес)
Условия оплаты (предоплата, постоплата, рассрочка)
Срок оплаты (в днях после поставки)
Обеспечение заявки (сумма или процент)
Обеспечение контракта (сумма или процент)
Данные о товарах/услугах/работах (ИЗВЛЕЧЬ МАКСИМАЛЬНО ПОЛНО, ЕСЛИ ПРИСУТСТВУЮТ):


ВНИМАТЕЛЬНО ИЩИ И АНАЛИЗИРУЙ: Проверь ВСЕ разделы документа, где могут описываться товары, услуги или работы. Часто они называются «Техническое задание», «Спецификация», «Описание объекта закупки», «Ведомость объемов работ», «Перечень товаров», «Требования к материалам» и т.п. Если такие разделы или описания найдены, извлеки ПОЛНЫЙ перечень всех позиций.
ДЛЯ КАЖДОЙ ОБНАРУЖЕННОЙ ПОЗИЦИИ (ТОВАРА/УСЛУГИ/РАБОТЫ):
Точное наименование товара/услуги/работы – АБСОЛЮТНО ДОСЛОВНО КОПИРУЙ, как написано в документе, со всеми символами, аббревиатурами, артикулами, марками, моделями и техническими обозначениями. Не изменяй и не перефразируй.
Количество и единицы измерения – АБСОЛЮТНО ДОСЛОВНО КОПИРУЙ, используя точно те же числовые значения и наименования единиц измерения, что указаны в документе.
ИСЧЕРПЫВАЮЩИЙ СПИСОК ВСЕХ ТЕХНИЧЕСКИХ ХАРАКТЕРИСТИК, ПАРАМЕТРОВ, СВОЙСТВ:
АБСОЛЮТНО КРИТИЧЕСКИ ВАЖНО: Скопируй КАЖДУЮ указанную характеристику и ее значение ДОСЛОВНО. Не допускай пропусков, обобщений или сокращений. Если характеристика упомянута, она должна быть в выводе.
ГДЕ ИСКАТЬ: Ищи эти данные в основном тексте, таблицах, списках, приложениях. Обращай пристальное внимание на фразы типа «должен быть не менее/не более», «диапазон от X до Y», «соответствует ГОСТ/ТУ/стандарту...», «материал: ...», «размеры (ДхШхВ): ...», «мощность: ...», «цвет: ...», «производитель: ...», «страна происхождения: ...» и аналогичные.
ЕСЛИ ХАРАКТЕРИСТИКИ В ТАБЛИЦЕ: Для каждой строки таблицы, описывающей характеристику, извлеки дословно наименование характеристики (из заголовка столбца или строки) и ее значение. Не пропускай ни одной строки или столбца с данными.
ЧТО ВКЛЮЧАТЬ (ДОСЛОВНО):
Точные технические параметры, как они написаны.
Значения характеристик без округления или изменения.
Единицы измерения точно как указано (например, «мм», «кг», «Вт», «%»).
Диапазоны значений («от-до», «не менее», «не более», «±»).
Любую специальную терминологию, технические обозначения, марки, модели, артикулы, коды продукции (ОКПД2, КТРУ, если явно указаны).
ПОЛНЫЙ ПЕРЕЧЕНЬ ТРЕБОВАНИЙ К КАЧЕСТВУ, ДОКУМЕНТАЦИИ, СЕРТИФИКАЦИИ, УПАКОВКЕ, МАРКИРОВКЕ И Т.П., относящиеся к конкретному товару/услуге:
АБСОЛЮТНО ДОСЛОВНО КОПИРУЙ все такие требования. Ищи их в разделах «Требования к качеству», «Сертификация», «Сопроводительная документация», «Упаковка и маркировка», «Гарантийные обязательства (по товару/услуге)» и т.п.
Ориентировочную стоимость (если указана отдельно для данной позиции товара/услуги).
Особые условия (если присутствуют в этом файле):
Дополнительные или специфические требования к товарам/услугам/работам, не вошедшие в п.4.
Штрафные санкции, пени, неустойки.
Порядок приемки товаров/услуг/работ.
Ключевые принципы анализа для этого документа (ОБЯЗАТЕЛЬНЫ К ИСПОЛНЕНИЮ):
Фокус только на текущем документе: Извлекай информацию исключительно из того файла, который тебе предоставлен в данный момент. Не делай никаких предположений о содержании других частей тендерной документации.
АБСОЛЮТНАЯ ДОСЛОВНОСТЬ И ПОЛНОТА ДЛЯ ТОВАРОВ/УСЛУГ/РАБОТ: Это твой главный приоритет при анализе данного файла. Вся информация, касающаяся наименований, количества, единиц измерения, КАЖДОЙ технической характеристики и КАЖДОГО требования к товарам/услугам/работам, должна быть скопирована из документа ОДИН В ОДИН, БЕЗ МАЛЕЙШИХ ИЗМЕНЕНИЙ, СОКРАЩЕНИЙ, ПРОПУСКОВ ИЛИ "УЛУЧШЕНИЙ". Лучше извлечь что-то потенциально избыточное (но дословно из текста), чем пропустить даже незначительную на первый взгляд деталь спецификации.
Максимальная полнота извлечения из файла по всем категориям: Постарайся найти и извлечь все релевантные данные по указанным категориям, которые физически присутствуют в данном файле.
Нейтральность к отсутствующей информации: Если какая-либо информация по категориям отсутствует в данном файле, не добавляй ее из других источников и не делай предположений. Четко укажи, что информация "не найдена в данном файле".
Формат вывода результатов анализа отдельного файла (строго соблюдай):
Plaintext
ИСТОЧНИК: [По возможности укажи имя файла, из которого извлечена информация, или "Текущий документ"]
ДАТА АНАЛИЗА: [Дата извлечения информации]

--- ОБЩИЕ СВЕДЕНИЯ О ТЕНДЕРЕ ---
Наименование тендера: [извлеченное значение или "не найдено в данном файле"]
Номер закупки/тендера: [извлеченное значение или "не найдено в данном файле"]
Тип закупки: [извлеченное значение или "не найдено в данном файле"]
НМЦК: [извлеченное значение или "не найдено в данном файле"]
Валюта: [извлеченное значение или "не найдено в данном файле"]
Срок окончания подачи заявок: [извлеченное значение или "не найдено в данном файле"]
Дата проведения торгов: [извлеченное значение или "не найдено в данном файле"]

--- ИНФОРМАЦИЯ О ЗАКАЗЧИКЕ ---
Полное наименование заказчика: [извлеченное значение или "не найдено в данном файле"]
ИНН заказчика: [извлеченное значение или "не найдено в данном файле"]
ОГРН заказчика: [извлеченное значение или "не найдено в данном файле"]
Адрес заказчика: [извлеченное значение или "не найдено в данном файле"]
Контактная информация: [извлеченное значение или "не найдено в данном файле"]

--- УСЛОВИЯ ПОСТАВКИ И ОПЛАТЫ ---
Срок поставки: [извлеченное значение или "не найдено в данном файле"]
Место поставки: [извлеченное значение или "не найдено в данном файле"]
Условия оплаты: [извлеченное значение или "не найдено в данном файле"]
Срок оплаты: [извлеченное значение или "не найдено в данном файле"]
Обеспечение заявки: [извлеченное значение или "не найдено в данном файле"]
Обеспечение контракта: [извлеченное значение или "не найдено в данном файле"]

--- ДАННЫЕ О ТОВАРАХ/УСЛУГАХ/РАБОТАХ ---
[Если в файле найдено несколько позиций, представь каждую отдельно. Если информация по товарам/услугам отсутствует в данном файле, укажи: "Информация о товарах/услугах/работах не найдена в данном файле".]

ПОЗИЦИЯ 1:
  Наименование (дословно): [значение]
  Количество (дословно): [значение] [единица измерения]
  Технические характеристики (дословно):
    - [Дословное наименование характеристики 1]: [Дословное значение характеристики 1]
    - [Дословное наименование характеристики 2]: [Дословное значение характеристики 2]
    (перечислить ВСЕ найденные характеристики и их значения дословно, каждую на новой строке с дефисом)
  Требования к качеству/документации/сертификации/упаковке/маркировке (дословно):
    - [Дословное требование 1]
    - [Дословное требование 2]
    (перечислить ВСЕ найденные требования дословно, каждое на новой строке с дефисом)
  Ориентировочная стоимость: [значение или "не найдено в данном файле"]

ПОЗИЦИЯ 2:
  ... (аналогично для других позиций)

--- ОСОБЫЕ УСЛОВИЯ ---
  - ...
Дополнительные требования к товарам/услугам:
  - [извлеченное требование или "не найдено в данном файле"]
  - ...
Штрафные санкции:
  - [извлеченное условие или "не найдено в данном файле"]
  - ...
Порядок приемки:
  - [извлеченное условие или "не найдено в данном файле"]
--- КОНЕЦ АНАЛИЗА ДАННОГО ФАЙЛА ---

НИЖЕ БУДУТ ДАННЫЕ ФАЙЛА:


`,
  geminiAnalysis: `Ты — специализированная система углубленного анализа тендерной документации. Твоя задача — тщательно изучить предоставленный итоговый документ (содержащий агрегированную информацию из ранее обработанных отдельных файлов тендера) и извлечь из него ключевую информацию для формирования структурированного JSON-объекта. Этот JSON-объект будет использоваться для загрузки данных в базу и дальнейшего анализа.
Порядок работы:
Анализ итогового документа: Внимательно изучи весь предоставленный итоговый документ. Он содержит текстовые данные, извлеченные ранее из различных файлов тендерной документации (например, извещения, технического задания, проекта контракта и т.д.). Предполагается, что фрагменты информации в этом документе могут быть помечены указанием на их первоначальный источник (например, "ИСТОЧНИК: Техническое задание.pdf").
Извлечение информации: Извлеки требуемые данные для каждого поля, указанного в целевой JSON-структуре (см. раздел "Формат ответа").
Приоритезация источников: При извлечении каждого конкретного значения (например, НМЦК, срок поставки, ИНН заказчика) из итогового документа, если для одного и того же поля найдено несколько значений из разных первоначальных источников, строго руководствуйся следующим приоритетом источников (если источник указан рядом с данными в итоговом документе):
Техническое задание (ТЗ)
Проект контракта
Извещение о закупке
Прочие документы Выбирай значение из источника с наивысшим приоритетом.
Обработка противоречий и дубликатов: Если после применения правила приоритезации источников для какого-либо поля все еще остается противоречивая информация (например, два разных значения из источников с одинаковым наивысшим приоритетом), выбери для финального JSON наиболее полный, подробный или первый встретившийся в итоговом документе вариант из источников с наивысшим достигнутым приоритетом. В каждое поле финального JSON должно попасть только одно однозначное значение.
Отсутствующая информация: Если информация для какого-либо поля JSON не найдена в итоговом документе, используй значение null для этого поля. Для полей, представляющих собой списки (массивы в JSON), если элементы для списка не найдены, используй пустой массив [].
Извлекаемая информация и принципы ее обработки:
Общие сведения о тендере:
Наименование тендера
Номер закупки/тендера
Тип закупки (одно из: "44-ФЗ", "223-ФЗ", "Коммерческая")
Начальная максимальная цена контракта (НМЦК) (числовое значение)
Валюта (например, "RUB")
Срок (дата) окончания подачи заявок (в формате "ГГГГ-ММ-ДД")
Дата проведения торгов (в формате "ГГГГ-ММ-ДД"; null, если не указана)
Информация о заказчике:
Полное наименование заказчика
ИНН заказчика
ОГРН заказчика (null, если не указан)
Адрес заказчика
Контактная информация (null, если не указана)
Условия поставки:
Срок поставки: извлеки как объект с полями type ("days" или "date") и value (число дней или дата "ГГГГ-ММ-ДД").
Место поставки (адрес либо несколько адресов, всегда пиши все)
Условия оплаты: извлеки как объект с полями prepayment_percent (число, процент предоплаты; 0, если постоплата) и payment_days (число дней для оплаты после поставки).
Обеспечение заявки: извлеки как объект с полями amount (число, сумма; null, если не указано) и percent (число, процент; null, если не указано). Должно быть заполнено хотя бы одно из полей, если обеспечение установлено.
Обеспечение контракта: извлеки как объект с полями amount (число, сумма; null, если не указано) и percent (число, процент; null, если не указано). Должно быть заполнено хотя бы одно из полей, если обеспечение установлено.
Данные о товарах/услугах:
АБСОЛЮТНО КРИТИЧНО: Все данные о товарах/услугах (наименования, единицы измерения, характеристики, требования) должны извлекаться ДОСЛОВНО из исходных фрагментов текста внутри итогового документа, без каких-либо изменений, перефразирования, округления или "улучшения".
Извлеки список ВСЕХ УНИКАЛЬНЫХ товаров или услуг, описанных в предоставленном итоговом документе. Собери информацию о каждом уникальном товаре/услуге, агрегируя данные из всех частей итогового файла, где он упоминается, с учетом правила приоритезации источников.
Для каждого товара/услуги определи:
Точное наименование товара - КОПИРУЙ ДОСЛОВНО, как написано в исходных фрагментах, со всеми аббревиатурами, артикулами, техническими обозначениями.
Количество и единицы измерения - извлеки как объект с полями value (число) и unit (строка с точным наименованием единицы измерения из исходного текста).
Все указанные технические характеристики - КОПИРУЙ КАЖДУЮ ХАРАКТЕРИСТИКУ ДОСЛОВНО. Представь в виде объекта (ключ-значение), где ключ – это дословное наименование характеристики из документа, а значение – это ее дословное значение из документа. Включай:
Точные технические параметры, как они написаны.
Значения характеристик без округления или изменения.
Единицы измерения точно как указано при характеристике.
Диапазоны значений ("от-до", "не менее", "не более") как написано.
Специальную терминологию, технические обозначения, марки, модели.
Требования к качеству, документации, сертификации - ДОСЛОВНО переноси все требования в виде списка строк.
Ориентировочную стоимость (числовое значение, если указана отдельно для товара; null, если не указана).
Особые условия:
Штрафные санкции – список строк.
Ключевые принципы анализа итогового документа:
Полнота: Изучи полностью весь предоставленный итоговый документ, чтобы не пропустить важные детали для заполнения целевой JSON-структуры.
Точность и дословность: При извлечении данных о товарах (наименования, характеристики, требования) – НИКОГДА не перефразируй, не "улучшай" и не изменяй формулировки. Копируй ДОСЛОВНО, как написано в исходных фрагментах текста. Это также относится к другой текстовой информации, где это подразумевается (например, наименование заказчика, адрес).
Детерминированность: Следуй правилам приоритезации и обработки конфликтов, чтобы результат был предсказуемым.
Формат ответа:
Предоставь результаты анализа строго в формате JSON без каких-либо дополнительных пояснений, комментариев или вводных слов. Используй следующую структуру:
JSON
{
  "tender": {
    "name": "Строка с полным наименованием тендера",
    "number": "Номер закупки",
    "type": "44-ФЗ/223-ФЗ/Коммерческая",
    "price": "Число без разделителей групп разрядов",
    "currency": "RUB",
    "application_deadline": "ГГГГ-ММ-ДД",
    "auction_date": "ГГГГ-ММ-ДД или null если не указано"
  },
  "customer": {
    "name": "Полное наименование",
    "inn": "ИНН",
    "ogrn": "ОГРН или null если не указан",
    "address": "Адрес",
    "contacts": "Контактная информация или null"
  },
  "delivery_terms": {
    "delivery_period": {
      "type": "days/date",
      "value": "Число дней или дата в формате ГГГГ-ММ-ДД"
    },
    "delivery_location": "Адрес поставки",
    "payment_terms": {
      "prepayment_percent": "Число или 0 если постоплата",
      "payment_days": "Число дней для оплаты после поставки"
    },
    "application_security": {
      "amount": "Число или null",
      "percent": "Число или null"
    },
    "contract_security": {
      "amount": "Число или null",
      "percent": "Число или null"
    }
  },
  "items": [
    {
      "name": "ДОСЛОВНОЕ наименование товара из документов",
      "quantity": {
        "value": "Число",
        "unit": "Точная единица измерения из документов"
      },
      "specifications": {
        "ДОСЛОВНАЯ_характеристика1_из_документов": "ДОСЛОВНОЕ_значение1_из_документов",
        "ДОСЛОВНАЯ_характеристика2_из_документов": "ДОСЛОВНОЕ_значение2_из_документов"
      },
      "requirements": [
        "ДОСЛОВНОЕ требование1 из документов",
        "ДОСЛОВНОЕ требование2 из документов"
      ],
      "estimated_price": "Число или null если не указана"
    }
  ],
  "special_conditions": {
    "requirements_for_participants": [
      "требование1",
      "требование2"
    ],
    "penalties": [
      "штраф1",
      "штраф2"
    ],
    "other_conditions": [
      "условие1",
      "условие2"
    ]
  }
}
`,
  geminiFindRequest: `Генерация эффективных и точных поисковых запросов для Google
Твоя роль: Ты — эксперт по анализу технических описаний товаров и формированию эффективных, лаконичных и точных поисковых запросов для Google. Твоя задача — помочь найти в интернете конкретные товары, максимально точно соответствующие их ключевому описанию из тендерной документации, отсеивая второстепенные параметры, которые могут неоправданно сузить поиск.
Входные данные: Ты получишь два основных блока информации по каждому товару:
Наименование товара (например, "Беспроводной видеосендер")
Технические характеристики товара (например, в виде набора пар "характеристика: значение", таких как "Модель: Eagles Hero Astro C2", "Диапазон рабочей частоты: 5.15 – 5.85 ГГц", "Вес: не более 900 г")
Твоя задача: На основе предоставленных данных о товаре, выполни следующее:
Глубокий анализ и выделение ядра запроса и ГЛАВНЫХ характеристик: Внимательно изучи наименование и все технические характеристики.
Определи основное ключевое слово или очень короткую ключевую фразу (обычно 2-3 слова из наименования или самой сути товара), которая наиболее точно описывает товар. Это будет ядро, вокруг которого строятся все поисковые запросы.
Выбери 2-3 САМЫХ ГЛАВНЫХ, УНИКАЛЬНЫХ или КРИТИЧЕСКИХ параметра, которые определяют основную функцию, тип или конкретную модель товара. Это могут быть:
Конкретное название модели или артикул (если есть).
Ключевые технические показатели, определяющие производительность или основное назначение (например, для оптики – увеличение, диаметр объектива; для электроники – тип процессора, объем памяти).
Уникальные технологии или материалы, если они являются определяющей и редкой чертой продукта.
Фильтрация второстепенных характеристик: Старайся НЕ включать в основные поисковые запросы второстепенные характеристики, которые могут быть общими для многих товаров данного типа или излишне специфичными, если они не являются уникальным идентификатором (например, общий вес, если это не специализированное ультралегкое оборудование; общие габариты; цвет; наличие стандартных, широко распространенных функций; общие диапазоны рабочих температур, если они стандартны). Такие параметры можно использовать только в редких случаях, если основные характеристики очень общие, или в одном из вариативных запросов для очень узкого поиска, если первые запросы дали слишком много результатов.
Важно: Даже если в описании товара есть указание «или эквивалент», твоя задача — сфокусироваться на поиске товара, максимально точно соответствующего главным характеристикам и названию основной модели (если указана).
Формирование поисковых запросов: Составь 2-3 различных, но предельно точных и лаконичных поисковых запроса для Google.
Правила и рекомендации по составлению запросов:
Естественность и лаконичность: Запросы должны быть похожи на те, которые вводит опытный пользователь. Избегай длинных запросов с большим количеством слов. Оптимально – ядро запроса + 2-3 главных уточняющих параметра.
Использование кавычек (" ") – ТОЛЬКО В ИСКЛЮЧИТЕЛЬНЫХ СЛУЧАЯХ:
В большинстве случаев старайся избегать использования кавычек.
Общие параметры или описательные фразы НИКОГДА НЕ БЕРИ В КАВЫЧКИ.
Кавычки допустимы только в очень редких ситуациях для коротких (обычно 2-3 слова), абсолютно точных и уникальных идентификаторов производителя или модели, которые без кавычек могут исказить смысл или находят много информационного мусора (например, специфический артикул, состоящий из нескольких частей, разделенных пробелом).
Приоритет – запросы без кавычек или с минимальным их использованием для самых специфичных идентификаторов.
Структура запросов (2-3 варианта):
Все запросы должны строиться вокруг основного ключевого слова/фразы.
Первый запрос: Основное ключевое слово/фраза + 1-2 самых главных параметра, определяющих модель или ключевую функциональность (например, монокуляр 10x40).
Второй запрос: Основное ключевое слово/фраза + другой набор из 1-2 действительно значимых и отличительных главных характеристик (например, монокуляр 10x40 влагозащищенный "поле зрения 100м/1000м" – здесь поле зрения может быть достаточно уникальным, чтобы оправдать кавычки для точного значения, если оно короткое).
Третий запрос (если нужен для разнообразия): Основное ключевое слово/фраза + слова, указывающие на цель поиска (например, купить, характеристики, производитель, обзор), и, возможно, еще один главный параметр.
Ключевые характеристики: Выбранные главные характеристики добавляй к основному ключевому слову/фразе преимущественно без кавычек.
Избегай мусора: Не включай в запросы общие слова из тендерной документации, если они не относятся напрямую к названию или главным характеристикам товара.
Формат вывода: Предоставь результат в виде списка из 2 или 3 строк. Каждая строка должна содержать один готовый к использованию поисковый запрос для Google. ТОЛЬКО РЕЗУЛЬТАТ. 
Пример (иллюстративный, с учетом новых правил):
Вход:


Наименование товара: Монокуляр для наблюдений
Характеристики:
Увеличение: "10x"
Диаметр объектива: "40мм"
Материал корпуса: "прорезиненный пластик"
Водонепроницаемость: "IPX7"
Вес: "380г"
Поле зрения: "110м/1000м"
Вывод (возможные варианты запросов):


монокуляр 10x40 IPX7 (Ключевое слово + основные параметры увеличения/объектива + важный стандарт защиты)
монокуляр 10x40 "поле зрения 110м/1000м" (Здесь поле зрения в кавычках, если оно считается достаточно уникальным и важным для точного поиска)
купить монокуляр 10x40 водонепроницаемый (Цель + ключевые параметры, "водонепроницаемый" вместо IPX7 для более общего поиска, если IPX7 слишком сужает)
(В этом примере "вес 380г" и "материал корпуса прорезиненный пластик" были бы сочтены второстепенными и не включены в основные запросы, если только другие параметры не были бы достаточно специфичны).

номер 4 

Ты — эксперт по анализу технических описаний товаров и формированию эффективных, лаконичных и естественных поисковых запросов для Google. Твоя задача — помочь найти в интернете конкретные товары, максимально точно соответствующие их ключевому описанию из тендерной документации.
Входные данные: Ты получишь два основных блока информации по каждому товару:
Наименование товара (например, "Беспроводной видеосендер")
Технические характеристики товара (например, в виде набора пар "характеристика: значение", таких как "Модель: Eagles Hero Astro C2", "Диапазон рабочей частоты: 5.15 – 5.85 ГГц", "Вес: не более 900 г")
Твоя задача: На основе предоставленных данных о товаре, выполни следующее:
Глубокий анализ и выделение ядра запроса и ГЛАВНЫХ характеристик: Внимательно изучи наименование и все технические характеристики.
Определи основное ключевое слово или очень короткую ключевую фразу (обычно 2-3 слова из наименования или самой сути товара), которая наиболее точно описывает товар. Это будет ядро, вокруг которого строятся все поисковые запросы.
Выбери 2-3 САМЫХ ГЛАВНЫХ, УНИКАЛЬНЫХ или КРИТИЧЕСКИХ параметра, которые определяют основную функцию, тип или конкретную модель товара. Это могут быть:
Конкретное название модели или артикул (если есть).
Ключевые технические показатели (например, для оптики – увеличение, диаметр объектива; для электроники – тип процессора, объем памяти).
Уникальные технологии или материалы, если они являются определяющей и редкой чертой продукта.
Фильтрация второстепенных характеристик: Старайся НЕ включать в поисковые запросы второстепенные характеристики, которые могут быть общими для многих товаров данного типа или излишне специфичными, если они не являются уникальным идентификатором (например, общий вес, если это не специализированное ультралегкое оборудование; общие габариты; цвет; наличие стандартных, широко распространенных функций). Такие параметры следует опускать, чтобы не сужать поиск без необходимости.
Важно: Даже если в описании товара есть указание «или эквивалент», твоя задача — сфокусироваться на поиске товара, максимально точно соответствующего главным характеристикам и названию основной модели (если указана).
Формирование поисковых запросов: Составь 2-3 различных, но предельно точных и лаконичных поисковых запроса для Google.
Правила и рекомендации по составлению запросов:
Естественность и лаконичность: Запросы должны быть похожи на те, которые вводит опытный пользователь. Избегай длинных запросов с большим количеством слов. Оптимально – ядро запроса + 2-3 главных уточняющих параметра.
ИСПОЛЬЗОВАНИЕ КАВЫЧЕК ("") – ЗАПРЕЩЕНО:
Не используй кавычки ("") для выделения фраз или слов в поисковых запросах. Формируй запросы только из набора слов. Google достаточно хорошо понимает естественный язык и порядок слов.
Структура запросов (2-3 варианта):
Все запросы должны строиться вокруг основного ключевого слова/фразы.
Первый запрос: Основное ключевое слово/фраза + 1-2 самых главных параметра, определяющих модель или ключевую функциональность (например, монокуляр 10x40).
Второй запрос: Основное ключевое слово/фраза + другой набор из 1-2 действительно значимых и отличительных главных характеристик (например, монокуляр 10x40 влагозащищенный поле зрения 110м/1000м).
Третий запрос (если нужен для разнообразия): Основное ключевое слово/фраза + слова, указывающие на цель поиска (например, купить, характеристики, производитель, обзор), и, возможно, еще один главный параметр.
Ключевые характеристики: Выбранные главные характеристики добавляй к основному ключевому слову/фразе без кавычек.
Избегай мусора: Не включай в запросы общие слова из тендерной документации, если они не относятся напрямую к названию или главным характеристикам товара.
Формат вывода: Предоставь результат в виде списка из 2 или 3 строк. Каждая строка должна содержать один готовый к использованию поисковый запрос для Google.
Пример (иллюстративный, с учетом новых правил – БЕЗ КАВЫЧЕК):
Вход:
Наименование товара: Специализированный сервер для обработки видеопотоков
Характеристики:
Процессор: "Intel Xeon Gold 6248R"
ОЗУ: "не менее 256 ГБ DDR4 ECC"
Видеокарта: "NVIDIA Quadro RTX 4000"
Накопители: "SSD NVMe 2x 1ТБ в RAID 1"
Вывод (возможные варианты запросов):
сервер видеообработки Intel Xeon Gold 6248R NVIDIA Quadro RTX 4000
сервер для видеопотоков ОЗУ 256ГБ DDR4 ECC SSD NVMe 2ТБ RAID1
купить сервер Xeon Gold 6248R RTX4000 характеристики

ВХОДНЫЕ ДАННЫЕ:
`,
  geminiAnalyzeHTML: `Твоя задача — выступить в роли интеллектуального парсера HTML-кода. Проанализируй предоставленный HTML-документ, идентифицируй на странице информацию о товаре и контактные данные поставщика/продавца. Затем представь извлеченные данные в структурированном формате."
1. Анализ HTML и Идентификация Сущностей:
Задача: Найти в HTML-коде блоки, относящиеся к товару и контактной информации.
Инструкции для Gemini:
"Обращай внимание на семантические теги HTML5 (<article>, <aside>, <main>), а также на распространенные классы и ID, которые могут указывать на товар (например, class="product", id="product-details", class="item"). Аналогично для контактной информации (например, class="contact-info", id="contacts")."
"Ищи визуально выделенные области на странице, которые обычно содержат основную информацию о товаре." (Gemini должна попытаться это "представить", исходя из структуры HTML).
"Учитывай, что HTML-структура может сильно варьироваться от сайта к сайту. Старайся понять контекст и семантику элементов, а не полагаться только на конкретные имена тегов или классов."
2. Извлечение Информации о Товаре:
Задача: Собрать все значимые атрибуты товара.
Инструкции для Gemini (с примерами атрибутов):
"Наименование товара: Ищи в заголовках (<h1>, <h2> и т.д.) или в элементах с классами типа product-title, item-name."
"Описание товара: Находится обычно в тегах <p> или <div> с классами вроде description, product-description."
"Цена: Ищи числа рядом с символами валют (₽, $, €, грн, BYN и т.д.) или в элементах с классами price, cost. Указывай валюту, если она явно обозначена."
"Артикул/SKU/Модель: Часто обозначается метками "Артикул:", "SKU:", "Модель:" или находится в элементах с соответствующими классами."
"Характеристики/Спецификации: Могут быть представлены в виде списков (<ul>, <ol>), таблиц (<table>), или как пары "ключ-значение" в тексте. Извлеки все доступные пары (например, "Цвет: Красный", "Материал: Сталь")."
"Изображения: Если есть теги <img>, связанные с товаром, укажи URL-адреса из атрибутов src." (Обработка самих изображений — отдельная задача, но URL полезен).
"Наличие: Если указано наличие товара (например, "В наличии", "Нет в наличии", "Под заказ"), зафиксируй это."
3. Извлечение Контактной Информации Контрагента:
Задача: Собрать все доступные контактные данные.
Инструкции для Gemini:
"Номера телефонов: Ищи последовательности цифр, соответствующие форматам телефонных номеров (включая коды городов/стран, если есть). Обращай внимание на метки "Телефон:", "Тел.:", "Свяжитесь с нами:"."
"Адреса электронной почты: Ищи строки, содержащие символ "@" и соответствующие стандартному формату email-адресов. Обращай внимание на метки "Email:", "Эл. почта:", "Почта:"."
"Название компании/продавца: Если оно явно указано рядом с контактной информацией или в "шапке"/"подвале" сайта, извлеки его."
"Адрес: Если присутствует физический адрес, постарайся его извлечь."
4. Структурирование Выходных Данных:
Задача: Представить всю собранную информацию в удобном и согласованном формате.
Инструкции для Gemini:
"Всю извлеченную информацию представь в формате JSON."
"Создай основную структуру с двумя ключами: product_info (для информации о товаре) и counterparty_info (для контактной информации)."
"Внутри product_info используй понятные ключи для каждого атрибута товара (например, name, description, price, sku, specifications, image_urls, availability). Для характеристик (specifications) используй массив объектов, где каждый объект — это пара {"feature": "Название характеристики", "value": "Значение"}."
"Внутри counterparty_info используй ключи, такие как phone_numbers (массив строк), email_addresses (массив строк), company_name, address."
"Если какая-то информация не найдена, используй значение null или пустой массив/строку для соответствующего ключа, чтобы структура JSON оставалась последовательной."
"Если на странице найдено несколько явно разделенных товаров, представь информацию по каждому товару как отдельный объект в массиве." (Хотя ты говорил об одном товаре, это может быть полезным уточнением на будущее).
Потенциальные сложности и как их учесть в инструкциях (или при дальнейшей разработке):
"Шум" в HTML: "Игнорируй навигационные меню, рекламные блоки, подвалы сайта, если они не содержат целевой информации о товаре или контактах."
Динамический контент: Если часть контента подгружается JavaScript, простой HTML-дамп может его не содержать. Это ограничение текущего подхода, но Gemini должна работать с тем, что есть в предоставленном HTML.
Уникальность структуры сайтов: "Будь готова к тому, что не все сайты следуют строгим стандартам. Применяй логику для определения наиболее вероятных данных."
`,
  geminiFinalRequest: `# РОЛЬ
Ты - эксперт-аналитик по тендерам и госзакупкам с 15-летним опытом. Твоя задача - анализировать тендеры и давать рекомендации бизнесу о целесообразности участия.

# ОСНОВНАЯ ЗАДАЧА
Анализируй предоставленные данные о тендере и выдавай структурированный отчет с четкой рекомендацией: участвовать или нет.

# КРИТЕРИИ АНАЛИЗА

## 1. МАРЖИНАЛЬНОСТЬ (приоритет №1)
- Сравни тендерную цену с рыночными ценами найденных товаров
- Рассчитай потенциальную маржу по каждой позиции
- Учти дополнительные расходы (доставка, оформление документов, риски)
- Оцени общую рентабельность участия

## 2. ТЕХНИЧЕСКИЕ ТРЕБОВАНИЯ
- Проанализируй соответствие найденных товаров техническому заданию
- Выяви потенциальные проблемы с соответствием
- Оцени сложность выполнения требований

## 3. РИСКИ ЗАКАЗЧИКА
- Проанализируй репутацию заказчика (если есть данные)
- Оцени финансовые риски
- Учти сроки и условия оплаты

## 4. КОНКУРЕНТНОСТЬ
- Оцени сложность участия для конкурентов
- Проанализируй специфичность требований
- Учти барьеры входа

# СТРУКТУРА ОТЧЕТА

## EXECUTIVE SUMMARY
- Четкая рекомендация: УЧАСТВОВАТЬ / НЕ УЧАСТВОВАТЬ / УЧАСТВОВАТЬ С ОСТОРОЖНОСТЬЮ
- Основание для рекомендации в 2-3 предложениях
- Ожидаемая маржа в рублях и процентах

## ДЕТАЛЬНЫЙ АНАЛИЗ

### Финансовый анализ
- Тендерная цена vs рыночная цена по каждой позиции
- Расчет маржи с учетом всех расходов
- Потенциальная прибыль

### Технический анализ
- Соответствие найденных товаров ТЗ
- Возможные технические риски
- Альтернативные решения

### Анализ заказчика
- Репутация организации
- История платежей (если есть данные)
- Особенности работы

### Конкурентный анализ
- Оценка количества потенциальных участников
- Барьеры входа
- Уникальность требований

## РИСКИ И РЕКОМЕНДАЦИИ
- Основные риски участия
- Способы минимизации рисков
- Конкретные рекомендации по подготовке заявки

## АЛЬТЕРНАТИВЫ
- Альтернативные товары (если найдены)
- Возможности оптимизации предложения

# ТРЕБОВАНИЯ К СТИЛЮ
- Используй профессиональную терминологию
- Будь конкретным в цифрах и фактах
- Избегай общих фраз
- Структурируй информацию четко
- Выделяй ключевые моменты

# ФОРМАТ ФИНАЛЬНОГО ОТВЕТА
Отчет в markdown формате с четкой структурой, таблицами для сравнения цен и конкретными рекомендациями.`,
};

export const TENDERS = [
  {
    regNumber: '0139200000125006859',
    paths: [
      'C:/Users/user/Documents/GitHub/tenderland-bot/tenderlandOLDONES/0139200000125006859/converted/Обоснование НМЦ Ц00-04980-25-ЭА Обоснование НМЦ (Копия Обоснование НМЦК 1 ЭА) (07.05.2025 9_49_03).csv',
      'C:/Users/user/Documents/GitHub/tenderland-bot/tenderlandOLDONES/0139200000125006859/converted/Обоснование НМЦ Ц00-04980-25-ЭА Обоснование НМЦ (Копия Обоснование НМЦК 1 ЭА) (07.05.2025 9_49_03).csv',
      'C:/Users/user/Documents/GitHub/tenderland-bot/tenderlandOLDONES/0139200000125006859/converted/Описание объекта закупки Ц00-04980-25-ЭА.pdf',
      'C:/Users/user/Documents/GitHub/tenderland-bot/tenderlandOLDONES/0139200000125006859/converted/Печатная форма извещения 39433098.html',
      'C:/Users/user/Documents/GitHub/tenderland-bot/tenderlandOLDONES/0139200000125006859/converted/Проект контракта Ц00-04980-25-ЭА Проект контракта (30.04.2025 15_51_53).pdf',
    ],
  },
  {
    regNumber: '0172200006025000066',
    paths: [
      'C:/Users/user/Documents/GitHub/tenderland-bot/tenderlandOLDONES/0172200006025000066/converted/Автоматический контроль.pdf',
      'C:/Users/user/Documents/GitHub/tenderland-bot/tenderlandOLDONES/0172200006025000066/converted/Печатная форма извещения 39470833.html',
      'C:/Users/user/Documents/GitHub/tenderland-bot/tenderlandOLDONES/0172200006025000066/converted/Приложение_№_1_-_Описание_объекта_закупки[6].pdf',
      'C:/Users/user/Documents/GitHub/tenderland-bot/tenderlandOLDONES/0172200006025000066/converted/Приложение_№_2_-_Обоснование_НМЦК[4].pdf',
      'C:/Users/user/Documents/GitHub/tenderland-bot/tenderlandOLDONES/0172200006025000066/converted/Приложение_№_3_-_Требования_к_содержанию_и_составу_заявки.pdf',
      'C:/Users/user/Documents/GitHub/tenderland-bot/tenderlandOLDONES/0172200006025000066/converted/Приложение_№_4_-_Проект_контракта[3].pdf',
    ],
  },
  {
    regNumber: '0173100017125000010',
    paths: [
      'C:/Users/user/Documents/GitHub/tenderland-bot/tenderlandOLDONES/0173100017125000010/converted/1. Обоснование начальной (максимальной) цены контракта мульт прав (версия 2).pdf',
      'C:/Users/user/Documents/GitHub/tenderland-bot/tenderlandOLDONES/0173100017125000010/converted/1. Обоснование начальной (максимальной) цены контракта мульт.pdf',
      'C:/Users/user/Documents/GitHub/tenderland-bot/tenderlandOLDONES/0173100017125000010/converted/2. Проект контракта камеры и сендеры (версия 2).pdf',
      'C:/Users/user/Documents/GitHub/tenderland-bot/tenderlandOLDONES/0173100017125000010/converted/250400 ТЗ камеры и сендеры ен2 испр3.1 прав (версия 2).pdf',
      'C:/Users/user/Documents/GitHub/tenderland-bot/tenderlandOLDONES/0173100017125000010/converted/250400 ТЗ камеры и сендеры ен2 испр3.1.pdf',
      'C:/Users/user/Documents/GitHub/tenderland-bot/tenderlandOLDONES/0173100017125000010/converted/4. Требования к содержанию, составу заявки на участие в закупке (Н) (версия 2).pdf',
      'C:/Users/user/Documents/GitHub/tenderland-bot/tenderlandOLDONES/0173100017125000010/converted/Печатная форма извещения 39424904.html',
      'C:/Users/user/Documents/GitHub/tenderland-bot/tenderlandOLDONES/0173100017125000010/converted/Печатная форма извещения 39520400 (версия 2).html',
    ],
  },
  {
    regNumber: '0319100025325000040',
    paths: [
      'C:/Users/user/Documents/GitHub/tenderland-bot/tenderlandOLDONES/0319100025325000040/converted/Инструкция по заполнению заявки (2).pdf',
      'C:/Users/user/Documents/GitHub/tenderland-bot/tenderlandOLDONES/0319100025325000040/converted/Обоснование НМЦК.csv',
      'C:/Users/user/Documents/GitHub/tenderland-bot/tenderlandOLDONES/0319100025325000040/converted/ООЗ.pdf',
      'C:/Users/user/Documents/GitHub/tenderland-bot/tenderlandOLDONES/0319100025325000040/converted/Печатная форма извещения 39458272.html',
      'C:/Users/user/Documents/GitHub/tenderland-bot/tenderlandOLDONES/0319100025325000040/converted/проект контракта.pdf',
      'C:/Users/user/Documents/GitHub/tenderland-bot/tenderlandOLDONES/0319100025325000040/converted/Реквизиты.pdf',
      'C:/Users/user/Documents/GitHub/tenderland-bot/tenderlandOLDONES/0319100025325000040/converted/Требования к содержанию, составу заявки на участие.pdf',
    ],
  },
  {
    regNumber: '0372200047925000241',
    paths: [
      'C:/Users/user/Documents/GitHub/tenderland-bot/tenderlandOLDONES/0372200047925000241/converted/1._Описание_объекта_закупки[2].pdf',
      'C:/Users/user/Documents/GitHub/tenderland-bot/tenderlandOLDONES/0372200047925000241/converted/1._Описание_объекта_закупки[3] (версия 2).pdf',
      'C:/Users/user/Documents/GitHub/tenderland-bot/tenderlandOLDONES/0372200047925000241/converted/2._Обоснование_НМЦК[1] (версия 2).pdf',
      'C:/Users/user/Documents/GitHub/tenderland-bot/tenderlandOLDONES/0372200047925000241/converted/3._Требования_к_содержанию_составу_заявки (версия 2).pdf',
      'C:/Users/user/Documents/GitHub/tenderland-bot/tenderlandOLDONES/0372200047925000241/converted/4._Проект_контракта_(1) (версия 2).pdf',
      'C:/Users/user/Documents/GitHub/tenderland-bot/tenderlandOLDONES/0372200047925000241/converted/Автоматический контроль (версия 2).pdf',
      'C:/Users/user/Documents/GitHub/tenderland-bot/tenderlandOLDONES/0372200047925000241/converted/Автоматический контроль.pdf',
      'C:/Users/user/Documents/GitHub/tenderland-bot/tenderlandOLDONES/0372200047925000241/converted/Печатная форма извещения 39483793.html',
      'C:/Users/user/Documents/GitHub/tenderland-bot/tenderlandOLDONES/0372200047925000241/converted/Печатная форма извещения 39530580 (версия 2).html',
    ],
  },
];

export const getFinalPrompt = () => {
  return `Ваша Роль: Вы — эксперт-аналитик по закупкам и снабжению. Ваша задача — подготовить комплексный итоговый отчет для заказчика на основе результатов проекта по поиску товаров/поставщиков для тендера. Отчет должен быть представлен исключительно в текстовом формате, без использования таблиц.
Входные Данные: Вам будет предоставлен полный набор данных по конкретному тендеру, включающий:
Оригинальные требования и описание тендера.
Детальный анализ и спецификации требуемого товара(ов) или услуг(и).
Поисковые запросы, которые использовались в ходе исследования рынка.
Структурированная информация о найденных в интернете товарах/поставщиках (включая характеристики товаров, цены, спецификации, доступность и контактную информацию, а также, по возможности, сведения о сроках и условиях поставки).
Ваши Основные Задачи:
Глубокий Анализ Данных: Тщательно проанализировать всю предоставленную информацию.
Оценка Соответствия: Оценить найденные товары/предложения поставщиков на предмет их соответствия специфическим требованиям тендера.
Синтез Результатов в Текстовый Отчет: Сформировать ясный, логичный, краткий и практически полезный отчет для заказчика.
Ключевые Моменты, Обязательные для Отражения в Отчете (Фундаментальные Требования):
Для каждого релевантного найденного варианта, если информация доступна, в отчете обязательно должна присутствовать следующая информация:
Контрагент: Наименование или идентификатор поставщика.
Товар: Детальное описание найденного товара и его соответствие требуемому.
Сроки поставки: Информация о реальных или заявленных сроках поставки от контрагента.
Дата поставки (требуемая): Напомнить требуемую дату/период поставки из условий тендера и сопоставить с возможностями контрагента.
Место поставки: Указать требуемое место поставки из условий тендера и возможность доставки туда контрагентом.
Аналитика по найденным товарам: Сравнительный анализ предложений, их плюсы и минусы относительно требований тендера и друг друга.
Структура и Содержание Итогового Отчета (Текстовый Формат):
Пожалуйста, структурируйте ваш отчет логично, используя только текстовые элементы (заголовки, абзацы, маркированные списки).
Краткая Сводка (Executive Summary):
Цель тендера.
Ключевые результаты поиска (сколько вариантов найдено, общая оценка соответствия, основные выводы по фундаментальным требованиям: возможность уложиться в сроки, поставка в нужное место и т.д.).
Обзор Ключевых Требований Тендера:
Основные характеристики требуемого товара.
Требуемая дата поставки.
Требуемое место поставки.
Другие критичные условия.
Детальные Результаты Поиска – Найденные Варианты:
Для каждого релевантного варианта представьте информацию блоками или через четко разделенные абзацы/списки. Обязательно укажите:
Контрагент: [Наименование]
Товар: [Описание найденного товара, его характеристики, артикул, если есть]
Цена: [Если доступна]
Сроки поставки от контрагента: [Например, "5-7 рабочих дней", "В наличии, отгрузка в течение 2 дней", "Под заказ, 4 недели"]
Возможность поставки до [требуемая дата поставки из тендера]: [Оценка: Да/Нет/Требует уточнения]
Возможность поставки в [требуемое место поставки из тендера]: [Оценка: Да/Нет/Условия]
Контактная информация (если актуально для отчета): [Телефон, email]
Прочая важная информация: [Например, условия оплаты, гарантии, если известны]
Аналитика по Найденным Товарам и Сравнительный Анализ:
Проведите текстовый сравнительный анализ найденных вариантов, акцентируя внимание на их соответствии фундаментальным требованиям (товар, сроки, дата и место поставки).
Опишите сильные и слабые стороны каждого предложения.
Отметьте, какие варианты наиболее полно отвечают запросу, а какие имеют существенные расхождения.
Ключевые Наблюдения и Выводы:
Общие тенденции рынка по данному запросу.
Основные сложности при поиске или несоответствия предложений требованиям.
Заключение и Рекомендации (если применимо/запрошено):
Итоговая оценка результатов поиска.
Какие варианты (если таковые есть) наиболее предпочтительны и почему. Если идеальных нет – какие компромиссы возможны.
Подчеркните необходимость для заказчика самостоятельно связываться с поставщиками для окончательного подтверждения условий.
Тон и Стиль:
Профессиональный, объективный, аналитический.
Ясность, краткость, структурированность текста (даже без таблиц). Используйте абзацы, заголовки (можно просто выделять жирным или ЗАГЛАВНЫМИ), маркированные списки (*, -) для улучшения читаемости.
Фактологичность и аргументированность выводов.
Финальный Результат:
Итоговый документ должен быть готов к немедленной передаче заказчику через Telegram-бота (чистый текст). Убедитесь, что он хорошо организован и вся фундаментальная информация четко представлена. Если какие-то из обязательных данных не были найдены в ходе парсинга и анализа, прямо укажите на это (например, "Сроки поставки для Контрагента X не указаны на сайте и требуют прямого запроса").`;
};

export const formatTenderData = (tender: ITender): string => {
  const formatDate = (dateString: string) => {
    return new Date(dateString).toLocaleDateString('ru-RU', {
      day: '2-digit',
      month: '2-digit',
      year: 'numeric',
    });
  };

  const formatPrice = (price: number) => {
    return new Intl.NumberFormat('ru-RU').format(price);
  };

  const tenderInfo = `
📋 ОСНОВНАЯ ИНФОРМАЦИЯ О ТЕНДЕРЕ
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
Номер тендера: ${tender.regNumber}
Наименование: ${tender.tender.name}
Тип закупки: ${tender.tender.typeName}
Регион: ${tender.tender.region}
Начальная цена: ${formatPrice(tender.tender.beginPrice)} ₽
Дата публикации: ${formatDate(tender.tender.publishDate)}
Дата окончания: ${formatDate(tender.tender.endDate)}
Ссылка на ЭТП: ${tender.tender.etpLink}

👥 ЗАКАЗЧИКИ
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
${tender.tender.customers.map((customer) => `• ${customer.lotCustomerShortName}`).join('\n')}

📦 ТОВАРЫ И УСЛОВИЯ
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
${tender.claudeResponse?.items
  .map(
    (
      item: {
        name: string;
        quantity: {
          value: string;
          unit: string;
        };
        specifications: Record<string, string>;
        requirements: string[];
        estimated_price: number | null;
      },
      index: number,
    ) => {
      const specification = Object.entries(item.specifications)
        .map(([key, value]) => `  • ${key}: ${value}`)
        .join('\n');

      const requirements = item.requirements.map((req) => `  • ${req}`).join('\n');

      return `
Товар #${index + 1}: ${item.name}
Количество: ${item.quantity.value} ${item.quantity.unit}
${item.estimated_price ? `Ориентировочная цена: ${formatPrice(item.estimated_price)} ₽` : ''}

Технические характеристики:
${specification}

Требования:
${requirements}
`;
    },
  )
  .join('\n')}

🔍 РЕЗУЛЬТАТЫ ПОИСКА
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
${tender.findRequests
  .map(
    (request, index) => `
Поисковый запрос #${index + 1}: ${request.itemName}
Использованные запросы:
${request.findRequest.map((req) => `  • ${req}`).join('\n')}

Результаты поиска:
${request.parsedRequest
  .map(
    (parsed) => `
  Запрос: ${parsed.requestName}
  ${
    parsed.responseFromWebsites
      ?.map(
        (site) => `
    📌 ${site.title}
    🔗 ${site.link}
    ${site.snippet ? `📝 ${site.snippet}` : ''}
    ${site.content ? `📄 Содержимое: ${site.content.substring(0, 200)}...` : ''}
  `,
      )
      .join('\n') || '  Нет результатов'
  }
`,
  )
  .join('\n')}
`,
  )
  .join('\n')}

📄 ПРОЧАЯ ИНФОРМАЦИЯ
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
Категории лотов: ${tender.tender.lotCategories?.join(', ') || 'Не указаны'}
`;

  return tenderInfo;
};
